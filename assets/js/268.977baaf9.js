(window.webpackJsonp=window.webpackJsonp||[]).push([[268],{585:function(s,a,t){"use strict";t.r(a);var n=t(17),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"view-语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#view-语法"}},[s._v("#")]),s._v(" View 语法")]),s._v(" "),t("p",[s._v("视图是可视化的表。")]),s._v(" "),t("p",[s._v("本章讲解如何创建、更新和删除视图。")]),s._v(" "),t("h2",{attrs:{id:"语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),t("h3",{attrs:{id:"_1-create-view-语句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-create-view-语句"}},[s._v("#")]),s._v(" 1. CREATE VIEW 语句")]),s._v(" "),t("p",[s._v("在 SQL 中，视图是基于 SQL 语句的结果集的可视化的表。")]),s._v(" "),t("p",[s._v("视图包含行和列，就像一个真实的表。视图中的字段就是来自一个或多个数据库中的真实的表中的字段。")]),s._v(" "),t("p",[s._v("您可以向视图添加 SQL 函数、WHERE 以及 JOIN 语句，也可以呈现数据，就像这些数据来自于某个单一的表一样。")]),s._v(" "),t("div",{staticClass:"language-v line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-v"}},[t("code",[s._v("SQL CREATE VIEW 语法\nCREATE VIEW view_name AS\nSELECT "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("column_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nFROM table_name\nWHERE condition\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("注释：视图总是显示最新的数据！每当用户查询视图时，数据库引擎通过使用视图的 SQL 语句重建数据。")]),s._v(" "),t("h3",{attrs:{id:"_2-create-view-实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-create-view-实例"}},[s._v("#")]),s._v(" 2. CREATE VIEW 实例")]),s._v(" "),t("p",[s._v("样本数据库 Northwind 拥有一些被默认安装的视图。")]),s._v(" "),t("p",[s._v('视图 "Current Product List" 会从 "Products" 表列出所有正在使用的产品（未停产的产品）。这个视图使用下面的 SQL 创建：')]),s._v(" "),t("div",{staticClass:"language-v line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-v"}},[t("code",[s._v("CREATE VIEW "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Current Product List"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" AS\nSELECT ProductID"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("ProductName\nFROM Products\nWHERE Discontinued"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("No\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("我们可以像这样查询上面这个视图：")]),s._v(" "),t("div",{staticClass:"language-v line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-v"}},[t("code",[s._v("SELECT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" FROM "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Current Product List"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v('Northwind 样本数据库的另一个视图会选取 "Products" 表中所有单位价格高于平均单位价格的产品：')]),s._v(" "),t("div",{staticClass:"language-v line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-v"}},[t("code",[s._v("CREATE VIEW "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Products Above Average Price"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" AS\nSELECT ProductName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("UnitPrice\nFROM Products\nWHERE UnitPrice"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SELECT "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("AVG")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("UnitPrice"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" FROM Products"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("我们可以像这样查询上面这个视图：")]),s._v(" "),t("div",{staticClass:"language-v line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-v"}},[t("code",[s._v("SELECT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" FROM "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Products Above Average Price"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v('Northwind 样本数据库的另一个视图会计算在 1997 年每个种类的销售总数。请注意，这个视图会从另一个名为 "Product Sales for 1997" 的视图那里选取数据：')]),s._v(" "),t("div",{staticClass:"language-v line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-v"}},[t("code",[s._v("CREATE VIEW "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Category Sales For "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1997")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" AS\nSELECT DISTINCT CategoryName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Sum")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ProductSales"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" AS CategorySales\nFROM "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Product Sales "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1997")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nGROUP BY CategoryName\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("我们可以像这样查询上面这个视图：")]),s._v(" "),t("div",{staticClass:"language-v line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-v"}},[t("code",[s._v("SELECT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" FROM "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Category Sales For "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1997")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v('我们也可以向查询添加条件。现在，我们仅仅需要查看 "Beverages" 类的销售总数：')]),s._v(" "),t("div",{staticClass:"language-v line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-v"}},[t("code",[s._v("SELECT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" FROM "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Category Sales For "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1997")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nWHERE CategoryName"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string quoted-string"}},[s._v("'Beverages'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_3-create-or-replace-view-语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-create-or-replace-view-语法"}},[s._v("#")]),s._v(" 3. CREATE OR REPLACE VIEW 语法")]),s._v(" "),t("p",[s._v("您可以使用下面的语法来更新视图：")]),s._v(" "),t("div",{staticClass:"language-v line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-v"}},[t("code",[s._v("CREATE OR REPLACE VIEW view_name AS\nSELECT "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("column_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nFROM table_name\nWHERE condition\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v('现在，我们希望向 "Current Product List" 视图添加 "Category" 列。我们将通过下列 SQL 更新视图：')]),s._v(" "),t("div",{staticClass:"language-v line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-v"}},[t("code",[s._v("CREATE VIEW "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Current Product List"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" AS\nSELECT ProductID"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("ProductName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("Category\nFROM Products\nWHERE Discontinued"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("No\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"_4-drop-view-语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-drop-view-语法"}},[s._v("#")]),s._v(" 4. DROP VIEW 语法")]),s._v(" "),t("p",[s._v("您可以通过 DROP VIEW 命令来删除视图。")]),s._v(" "),t("div",{staticClass:"language-v line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-v"}},[t("code",[s._v("DROP VIEW view_name\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);