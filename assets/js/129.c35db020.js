(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{453:function(a,s,t){"use strict";t.r(s);var e=t(17),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"location-对象-url-对象-urlsearchparams-对象"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#location-对象-url-对象-urlsearchparams-对象"}},[a._v("#")]),a._v(" Location 对象，URL 对象，URLSearchParams 对象")]),a._v(" "),t("h2",{attrs:{id:"location-对象"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#location-对象"}},[a._v("#")]),a._v(" Location 对象")]),a._v(" "),t("p",[a._v("Location对象是浏览器提供的原生对象，提供 URL 相关的信息和操作方法。通过window.location和document.location属性，可以拿到这个对象。")]),a._v(" "),t("h3",{attrs:{id:"_1-属性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-属性"}},[a._v("#")]),a._v(" 1. 属性")]),a._v(" "),t("p",[a._v("Location对象提供以下属性。")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("Location.href")]),a._v("：整个 URL。")]),a._v(" "),t("li",[t("code",[a._v("Location.protocol")]),a._v("：当前 URL 的协议，包括冒号（:）。")]),a._v(" "),t("li",[t("code",[a._v("Location.host")]),a._v("：主机。如果端口不是协议默认的80和433，则还会包括冒号（:）和端口。")]),a._v(" "),t("li",[t("code",[a._v("Location.hostname")]),a._v("：主机名，不包括端口。")]),a._v(" "),t("li",[t("code",[a._v("Location.port")]),a._v("：端口号。")]),a._v(" "),t("li",[t("code",[a._v("Location.pathname")]),a._v("：URL 的路径部分，从根路径/开始。")]),a._v(" "),t("li",[t("code",[a._v("Location.search")]),a._v("：查询字符串部分，从问号?开始。")]),a._v(" "),t("li",[t("code",[a._v("Location.hash")]),a._v("：片段字符串部分，从#开始。")]),a._v(" "),t("li",[t("code",[a._v("Location.username")]),a._v("：域名前面的用户名。")]),a._v(" "),t("li",[t("code",[a._v("Location.password")]),a._v("：域名前面的密码。")]),a._v(" "),t("li",[t("code",[a._v("Location.origin")]),a._v("：URL 的协议、主机名和端口。")])]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" 当前网址为\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" http://user:passwd@www.example.com:4097/path/a.html"),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("x")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("111")])])]),t("span",{pre:!0,attrs:{class:"token fragment"}},[t("span",{pre:!0,attrs:{class:"token fragment-delimiter"}},[a._v("#")]),a._v("part1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("document.location.href")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "http://user:passwd@www.example.com:4097/path/a.html'),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("x")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("111")])])]),t("span",{pre:!0,attrs:{class:"token fragment"}},[t("span",{pre:!0,attrs:{class:"token fragment-delimiter"}},[a._v("#")]),a._v("part1")]),a._v('"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("document.location.protocol")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "http:"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("document.location.host")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "www.example.com:4097"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("document.location.hostname")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "www.example.com"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("document.location.port")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "4097"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("document.location.pathname")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "/path/a.html"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("document.location.search")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "'),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("x")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("111")])])]),a._v('"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("document.location.hash")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "'),t("span",{pre:!0,attrs:{class:"token fragment"}},[t("span",{pre:!0,attrs:{class:"token fragment-delimiter"}},[a._v("#")]),a._v("part1")]),a._v('"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("document.location.username")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "user"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("document.location.password")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "passwd"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("document.location.origin")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "http://user:passwd@www.example.com:4097"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br")])]),t("p",[a._v("这些属性里面，只有origin属性是只读的，其他属性都可写。")]),a._v(" "),t("p",[a._v("注意，如果对Location.href写入新的 URL 地址，浏览器会立刻跳转到这个新地址。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" 跳转到新网址\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("document.location.href")]),a._v(" = 'http://www.example.com';\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("这个特性常常用于让网页自动滚动到新的锚点。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("document.location.href")]),a._v(" = '"),t("span",{pre:!0,attrs:{class:"token fragment"}},[t("span",{pre:!0,attrs:{class:"token fragment-delimiter"}},[a._v("#")]),a._v("top';")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" 等同于\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("document.location.hash")]),a._v(" = '"),t("span",{pre:!0,attrs:{class:"token fragment"}},[t("span",{pre:!0,attrs:{class:"token fragment-delimiter"}},[a._v("#")]),a._v("top';")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("直接改写location，相当于写入href属性。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("document.location")]),a._v(" = 'http://www.example.com';\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" 等同于\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("document.location.href")]),a._v(" = 'http://www.example.com';\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("另外，Location.href属性是浏览器唯一允许跨域写入的属性，即非同源的窗口可以改写另一个窗口（比如子窗口与父窗口）的Location.href属性，导致后者的网址跳转。Location的其他属性都不允许跨域写入。")]),a._v(" "),t("h3",{attrs:{id:"_2-方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-方法"}},[a._v("#")]),a._v(" 2. 方法")]),a._v(" "),t("h4",{attrs:{id:"_1-location-assign"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-location-assign"}},[a._v("#")]),a._v(" （1）Location.assign()")]),a._v(" "),t("p",[a._v("assign方法接受一个 URL 字符串作为参数，使得浏览器立刻跳转到新的 URL。如果参数不是有效的 URL 字符串，则会报错。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" 跳转到新的网址\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("document.location.assign('http:"),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),a._v("www.example.com')")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h4",{attrs:{id:"_2-location-replace"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-location-replace"}},[a._v("#")]),a._v(" （2）Location.replace()")]),a._v(" "),t("p",[a._v("replace方法接受一个 URL 字符串作为参数，使得浏览器立刻跳转到新的 URL。如果参数不是有效的 URL 字符串，则会报错。")]),a._v(" "),t("p",[a._v("它与assign方法的差异在于，replace会在浏览器的浏览历史History里面删除当前网址，也就是说，一旦使用了该方法，后退按钮就无法回到当前网页了，相当于在浏览历史里面，使用新的 URL 替换了老的 URL。它的一个应用是，当脚本发现当前是移动设备时，就立刻跳转到移动版网页。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" 跳转到新的网址\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("document.location.replace('http:"),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),a._v("www.example.com')")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h4",{attrs:{id:"_3-location-reload"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-location-reload"}},[a._v("#")]),a._v(" （3）Location.reload()")]),a._v(" "),t("p",[a._v("reload方法使得浏览器重新加载当前网址，相当于按下浏览器的刷新按钮。")]),a._v(" "),t("p",[a._v("它接受一个布尔值作为参数。如果参数为true，浏览器将向服务器重新请求这个网页，并且重新加载后，网页将滚动到头部（即scrollTop === 0）。如果参数是false或为空，浏览器将从本地缓存重新加载该网页，并且重新加载后，网页的视口位置是重新加载前的位置。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" 向服务器重新请求当前网址\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("window.location.reload(true);")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h4",{attrs:{id:"_4-location-tostring"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-location-tostring"}},[a._v("#")]),a._v(" （4）Location.toString()")]),a._v(" "),t("p",[a._v("toString方法返回整个 URL 字符串，相当于读取Location.href属性。")]),a._v(" "),t("h2",{attrs:{id:"url-的编码和解码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#url-的编码和解码"}},[a._v("#")]),a._v(" URL 的编码和解码")]),a._v(" "),t("p",[a._v("网页的 URL 只能包含合法的字符。合法字符分成两类。")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("URL 元字符：分号（;），逗号（,），斜杠（/），问号（?），冒号（:），at（@），&，等号（=），加号（+），美元符号（$），井号（#）")])]),a._v(" "),t("li",[t("p",[a._v("语义字符：a-z，A-Z，0-9，连词号（-），下划线（_），点（.），感叹号（!），波浪线（~），星号（*），单引号（'），圆括号（()）")])])]),a._v(" "),t("p",[a._v("除了以上字符，其他字符出现在 URL 之中都必须转义，规则是根据操作系统的默认编码，将每个字节转为百分号（%）加上两个大写的十六进制字母。")]),a._v(" "),t("p",[a._v("比如，UTF-8 的操作系统上，"),t("code",[a._v("http://www.example.com/q=")]),a._v("春节这个 URL 之中，汉字“春节”不是 URL 的合法字符，所以被浏览器自动转成"),t("code",[a._v("http://www.example.com/q=%E6%98%A5%E8%8A%82")]),a._v("。其中，“春”转成了"),t("code",[a._v("%E6%98%A5")]),a._v("，“节”转成了"),t("code",[a._v("%E8%8A%82")]),a._v("。这是因为“春”和“节”的 UTF-8 编码分别是E6 98 A5和E8 8A 82，将每个字节前面加上百分号，就构成了 URL 编码。")]),a._v(" "),t("p",[a._v("JavaScript 提供四个 URL 的编码/解码方法。")]),a._v(" "),t("ul",[t("li",[a._v("encodeURI()")]),a._v(" "),t("li",[a._v("encodeURIComponent()")]),a._v(" "),t("li",[a._v("decodeURI()")]),a._v(" "),t("li",[a._v("decodeURIComponent()")])]),a._v(" "),t("h3",{attrs:{id:"_1-encodeuri"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-encodeuri"}},[a._v("#")]),a._v(" 1. encodeURI()")]),a._v(" "),t("p",[a._v("encodeURI()方法用于转码整个 URL。它的参数是一个字符串，代表整个 URL。它会将元字符和语义字符之外的字符，都进行转义。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("encodeURI('http:"),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),a._v("www.example.com"),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),a._v("q=")]),a._v("春节')\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "http://www.example.com/q=%E6%98%A5%E8%8A%82"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h3",{attrs:{id:"_2-encodeuricomponent"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-encodeuricomponent"}},[a._v("#")]),a._v(" 2. encodeURIComponent()")]),a._v(" "),t("p",[a._v("encodeURIComponent()方法用于转码 URL 的组成部分，会转码除了语义字符之外的所有字符，即元字符也会被转码。所以，它不能用于转码整个 URL。它接受一个参数，就是 URL 的片段。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("encodeURIComponent('")]),a._v("春节')\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "%E6%98%A5%E8%8A%82"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("encodeURIComponent('http:"),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),a._v("www.example.com"),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),a._v("q=")]),a._v("春节')\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "http%3A%2F%2Fwww.example.com%2Fq%3D%E6%98%A5%E8%8A%82"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("p",[a._v("上面代码中，encodeURIComponent()会连 URL 元字符一起转义，所以如果转码整个 URL 就会出错。")]),a._v(" "),t("h3",{attrs:{id:"_3-decodeuri"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-decodeuri"}},[a._v("#")]),a._v(" 3. decodeURI()")]),a._v(" "),t("p",[a._v("decodeURI()方法用于整个 URL 的解码。它是encodeURI()方法的逆运算。它接受一个参数，就是转码后的 URL。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("decodeURI('http:"),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),a._v("www.example.com"),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),a._v("q=%E6%98%A5%E8%8A%82')")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "http://www.example.com/q=春节"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h3",{attrs:{id:"_4-decodeuricomponent"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-decodeuricomponent"}},[a._v("#")]),a._v(" 4. decodeURIComponent()")]),a._v(" "),t("p",[a._v("decodeURIComponent()用于URL 片段的解码。它是encodeURIComponent()方法的逆运算。它接受一个参数，就是转码后的 URL 片段。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("decodeURIComponent('%E6%98%A5%E8%8A%82')")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "春节"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h2",{attrs:{id:"url-对象"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#url-对象"}},[a._v("#")]),a._v(" URL 对象")]),a._v(" "),t("p",[a._v("URL对象是浏览器的原生对象，可以用来构造、解析和编码 URL。一般情况下，通过window.URL可以拿到这个对象。")]),a._v(" "),t("p",[t("code",[a._v("<a>")]),a._v("元素和"),t("code",[a._v("<area>")]),a._v("元素都部署了这个接口。这就是说，它们的 DOM 节点对象可以使用 URL 的实例属性和方法。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" a = document.createElement('a');\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("a.href")]),a._v(" = 'http://example.com/"),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("foo")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("1'")])]),t("span",{pre:!0,attrs:{class:"token pair-delimiter"}},[a._v(";")])]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("a.hostname")]),a._v(' // "example.com"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("a.search")]),a._v(' // "'),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("foo")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("1")])])]),a._v('"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("p",[a._v("上面代码中，a是"),t("code",[a._v("<a>")]),a._v("元素的 DOM 节点对象。可以在这个对象上使用 URL 的实例属性，比如hostname和search。")]),a._v(" "),t("h3",{attrs:{id:"_1-构造函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-构造函数"}},[a._v("#")]),a._v(" 1. 构造函数")]),a._v(" "),t("p",[a._v("URL对象本身是一个构造函数，可以生成 URL 实例。")]),a._v(" "),t("p",[a._v("它接受一个表示 URL 的字符串作为参数。如果参数不是合法的 URL，会报错。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" url = new URL('http://www.example.com/index.html');\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url.href")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "http://www.example.com/index.html"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("如果参数是另一个 URL 实例，构造函数会自动读取该实例的href属性，作为实际参数。")]),a._v(" "),t("p",[a._v("如果 URL 字符串是一个相对路径，那么需要表示绝对路径的第二个参数，作为计算基准。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" url1 = new URL('index.html', 'http://example.com');\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url1.href")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "http://example.com/index.html"\n\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" url2 = new URL('page2.html', 'http://example.com/page1.html');\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url2.href")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "http://example.com/page2.html"\n\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" url3 = new URL('..', 'http://example.com/a/b.html')\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url3.href")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "http://example.com/"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br")])]),t("p",[a._v("上面代码中，返回的 URL 实例的路径都是在第二个参数的基础上，切换到第一个参数得到的。最后一个例子里面，第一个参数是..，表示上层路径。")]),a._v(" "),t("h3",{attrs:{id:"_2-实例属性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-实例属性"}},[a._v("#")]),a._v(" 2. 实例属性")]),a._v(" "),t("p",[a._v("URL 实例的属性与Location对象的属性基本一致，返回当前 URL 的信息。")]),a._v(" "),t("ul",[t("li",[a._v("URL.href：返回整个 URL")]),a._v(" "),t("li",[a._v("URL.protocol：返回协议，以冒号:结尾")]),a._v(" "),t("li",[a._v("URL.hostname：返回域名")]),a._v(" "),t("li",[a._v("URL.host：返回域名与端口，包含:号，默认的80和443端口会省略")]),a._v(" "),t("li",[a._v("URL.port：返回端口")]),a._v(" "),t("li",[a._v("URL.origin：返回协议、域名和端口")]),a._v(" "),t("li",[a._v("URL.pathname：返回路径，以斜杠/开头")]),a._v(" "),t("li",[a._v("URL.search：返回查询字符串，以问号?开头")]),a._v(" "),t("li",[a._v("URL.searchParams：返回一个URLSearchParams实例，该属性是Location对象没有的")]),a._v(" "),t("li",[a._v("URL.hash：返回片段识别符，以井号#开头")]),a._v(" "),t("li",[a._v("URL.password：返回域名前面的密码")]),a._v(" "),t("li",[a._v("URL.username：返回域名前面的用户名")])]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" url = new URL('http://user:passwd@www.example.com:4097/path/a.html"),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("x")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("111")])])]),t("span",{pre:!0,attrs:{class:"token fragment"}},[t("span",{pre:!0,attrs:{class:"token fragment-delimiter"}},[a._v("#")]),a._v("part1');")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url.href")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "http://user:passwd@www.example.com:4097/path/a.html'),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("x")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("111")])])]),t("span",{pre:!0,attrs:{class:"token fragment"}},[t("span",{pre:!0,attrs:{class:"token fragment-delimiter"}},[a._v("#")]),a._v("part1")]),a._v('"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url.protocol")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "http:"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url.hostname")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "www.example.com"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url.host")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "www.example.com:4097"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url.port")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "4097"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url.origin")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "http://www.example.com:4097"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url.pathname")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "/path/a.html"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url.search")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "'),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("x")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("111")])])]),a._v('"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url.searchParams")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" URLSearchParams {}\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url.hash")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "'),t("span",{pre:!0,attrs:{class:"token fragment"}},[t("span",{pre:!0,attrs:{class:"token fragment-delimiter"}},[a._v("#")]),a._v("part1")]),a._v('"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url.password")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "passwd"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url.username")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' "user"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br"),t("span",{staticClass:"line-number"},[a._v("25")]),t("br"),t("span",{staticClass:"line-number"},[a._v("26")]),t("br")])]),t("p",[a._v("这些属性里面，只有origin属性是只读的，其他属性都可写。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" url = new URL('http://example.com/index.html"),t("span",{pre:!0,attrs:{class:"token fragment"}},[t("span",{pre:!0,attrs:{class:"token fragment-delimiter"}},[a._v("#")]),a._v("part1');")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url.pathname")]),a._v(" = 'index2.html';\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url.href")]),a._v(' // "http://example.com/index2.html'),t("span",{pre:!0,attrs:{class:"token fragment"}},[t("span",{pre:!0,attrs:{class:"token fragment-delimiter"}},[a._v("#")]),a._v("part1")]),a._v('"\n\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url.hash")]),a._v(" = '"),t("span",{pre:!0,attrs:{class:"token fragment"}},[t("span",{pre:!0,attrs:{class:"token fragment-delimiter"}},[a._v("#")]),a._v("part2';")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("url.href")]),a._v(' // "http://example.com/index2.html'),t("span",{pre:!0,attrs:{class:"token fragment"}},[t("span",{pre:!0,attrs:{class:"token fragment-delimiter"}},[a._v("#")]),a._v("part2")]),a._v('"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])]),t("p",[a._v("上面代码中，改变 URL 实例的pathname属性和hash属性，都会实时反映在 URL 实例当中。")]),a._v(" "),t("h3",{attrs:{id:"_3-静态方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-静态方法"}},[a._v("#")]),a._v(" 3. 静态方法")]),a._v(" "),t("h4",{attrs:{id:"_1-url-createobjecturl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-url-createobjecturl"}},[a._v("#")]),a._v(" （1）URL.createObjectURL()")]),a._v(" "),t("p",[a._v("URL.createObjectURL方法用来为上传/下载的文件、流媒体文件生成一个 URL 字符串。这个字符串代表了File对象或Blob对象的 URL。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" HTML 代码如下\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' <div id="display"/>\n'),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" <input\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v('   type="file"\n'),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v('   id="fileElem"\n'),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v("   multiple\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v('   accept="image/*"\n'),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v('   onchange="handleFiles(this.files)"\n'),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v("  >\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" div = document.getElementById('display');\n\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("function")]),a._v(" handleFiles(files) {\n  for (var i = 0; i < files.length; i++) {\n    var img = document.createElement('img');\n    img.src = window.URL.createObjectURL(files[i]);\n    div.appendChild(img);\n  }\n}\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br")])]),t("p",[a._v("上面代码中，URL.createObjectURL方法用来为上传的文件生成一个 URL 字符串，作为"),t("code",[a._v("<img>")]),a._v("元素的图片来源。")]),a._v(" "),t("p",[a._v("该方法生成的 URL 就像下面的样子。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token scheme"}},[a._v("blob"),t("span",{pre:!0,attrs:{class:"token scheme-delimiter"}},[a._v(":")])]),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("http:"),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),a._v("localhost"),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),a._v("c745ef73-ece9-46da-8f66-ebes574789b1")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("注意，每次使用URL.createObjectURL方法，都会在内存里面生成一个 URL 实例。如果不再需要该方法生成的 URL 字符串，为了节省内存，可以使用URL.revokeObjectURL()方法释放这个实例。")]),a._v(" "),t("h4",{attrs:{id:"_2-url-revokeobjecturl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-url-revokeobjecturl"}},[a._v("#")]),a._v(" （2）URL.revokeObjectURL()")]),a._v(" "),t("p",[a._v("URL.revokeObjectURL方法用来释放URL.createObjectURL方法生成的 URL 实例。它的参数就是URL.createObjectURL方法返回的 URL 字符串。")]),a._v(" "),t("p",[a._v("下面为上一段的示例加上URL.revokeObjectURL()。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" div = document.getElementById('display');\n\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("function")]),a._v(" handleFiles(files) {\n  for (var i = 0; i < files.length; i++) {\n    var img = document.createElement('img');\n    img.src = window.URL.createObjectURL(files[i]);\n    div.appendChild(img);\n    img.onload = function() {\n      window.URL.revokeObjectURL(this.src);\n    }\n  }\n}\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br")])]),t("p",[a._v("上面代码中，一旦图片加载成功以后，为本地文件生成的 URL 字符串就没用了，于是可以在img.onload回调函数里面，通过URL.revokeObjectURL方法卸载这个 URL 实例。")]),a._v(" "),t("h2",{attrs:{id:"urlsearchparams-对象"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#urlsearchparams-对象"}},[a._v("#")]),a._v(" URLSearchParams 对象")]),a._v(" "),t("h3",{attrs:{id:"_1-概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-概述"}},[a._v("#")]),a._v(" 1. 概述")]),a._v(" "),t("p",[a._v("URLSearchParams对象是浏览器的原生对象，用来构造、解析和处理 URL 的查询字符串（即 URL 问号后面的部分）。")]),a._v(" "),t("p",[a._v("它本身也是一个构造函数，可以生成实例。参数可以为查询字符串，起首的问号?有没有都行，也可以是对应查询字符串的数组或对象。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" 方法一：传入字符串\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams('"),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("foo")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("1")])]),t("span",{pre:!0,attrs:{class:"token pair-delimiter"}},[a._v("&")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("bar")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("2')")])]),t("span",{pre:!0,attrs:{class:"token pair-delimiter"}},[a._v(";")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" 等同于\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams(document.location.search);\n\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" 方法二：传入数组\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams([['foo', 1], ['bar', 2]]);\n\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" 方法三：传入对象\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams({'foo' : 1 , 'bar' : 2});\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br")])]),t("p",[a._v("URLSearchParams会对查询字符串自动编码。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams({'foo': '你好'});\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.toString()")]),a._v(' // "foo=%E4%BD%A0%E5%A5%BD"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("上面代码中，foo的值是汉字，URLSearchParams对其自动进行 URL 编码。")]),a._v(" "),t("p",[a._v("浏览器向服务器发送表单数据时，可以直接使用URLSearchParams实例作为表单数据。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("const")]),a._v(" params = new URLSearchParams({foo: 1, bar: 2});\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("fetch('https:"),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),a._v("example.com"),t("span",{pre:!0,attrs:{class:"token path-separator"}},[a._v("/")]),a._v("api',")]),a._v(" {\n  method: 'POST',\n  body: params\n}).then(...)\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("p",[a._v("上面代码中，fetch命令向服务器发送命令时，可以直接使用URLSearchParams实例。")]),a._v(" "),t("p",[a._v("URLSearchParams可以与URL接口结合使用。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" url = new URL(window.location);\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" foo = url.searchParams.get('foo') || 'somedefault';\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("上面代码中，URL 实例的searchParams属性就是一个URLSearchParams实例，所以可以使用URLSearchParams接口的get方法。")]),a._v(" "),t("p",[a._v("DOM 的a元素节点的searchParams属性，就是一个URLSearchParams实例。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" a = document.createElement('a');\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("a.href")]),a._v(" = 'https://example.com"),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("filter")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("api'")])]),t("span",{pre:!0,attrs:{class:"token pair-delimiter"}},[a._v(";")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("a.searchParams.get('filter')")]),a._v(' // "api"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("URLSearchParams实例有遍历器接口，可以用for...of循环遍历（详见《ES6 标准入门》的《Iterator》一章）。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams({'foo': 1 , 'bar': 2});\n\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("for")]),a._v(" (var p of params) {\n  console.log(p[0] + ': ' + p[1]);\n}\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" foo: 1\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" bar: 2\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])]),t("p",[a._v("URLSearchParams没有实例属性，只有实例方法。")]),a._v(" "),t("h3",{attrs:{id:"_2-urlsearchparams-tostring"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-urlsearchparams-tostring"}},[a._v("#")]),a._v(" 2. URLSearchParams.toString()")]),a._v(" "),t("p",[a._v("toString方法返回实例的字符串形式。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" url = new URL('https://example.com"),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("foo")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("1")])]),t("span",{pre:!0,attrs:{class:"token pair-delimiter"}},[a._v("&")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("bar")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("2')")])]),t("span",{pre:!0,attrs:{class:"token pair-delimiter"}},[a._v(";")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams(url.search);\n\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.toString()")]),a._v(" // \"foo=1&bar=2'\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("p",[a._v("那么需要字符串的场合，会自动调用toString方法。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams({version: 2.0});\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("window.location.href")]),a._v(" = location.pathname + '"),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("'")])])]),a._v(" + params;\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("上面代码中，location.href赋值时，可以直接使用params对象。这时就会自动调用toString方法。")]),a._v(" "),t("h3",{attrs:{id:"_3-urlsearchparams-append"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-urlsearchparams-append"}},[a._v("#")]),a._v(" 3. URLSearchParams.append()")]),a._v(" "),t("p",[a._v("append方法用来追加一个查询参数。它接受两个参数，第一个为键名，第二个为键值，没有返回值。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams({'foo': 1 , 'bar': 2});\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.append('baz',")]),a._v(" 3);\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.toString()")]),a._v(' // "foo=1&bar=2&baz=3"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("append方法不会识别是否键名已经存在。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams({'foo': 1 , 'bar': 2});\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.append('foo',")]),a._v(" 3);\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.toString()")]),a._v(' // "foo=1&bar=2&foo=3"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("上面代码中，查询字符串里面foo已经存在了，但是append依然会追加一个同名键。")]),a._v(" "),t("h3",{attrs:{id:"_4-urlsearchparams-delete"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-urlsearchparams-delete"}},[a._v("#")]),a._v(" 4. URLSearchParams.delete()")]),a._v(" "),t("p",[a._v("delete方法用来删除指定的查询参数。它接受键名作为参数。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams({'foo': 1 , 'bar': 2});\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.delete('bar');")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.toString()")]),a._v(' // "foo=1"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("h3",{attrs:{id:"_5-urlsearchparams-has"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-urlsearchparams-has"}},[a._v("#")]),a._v(" 5. URLSearchParams.has()")]),a._v(" "),t("p",[a._v("has方法返回一个布尔值，表示查询字符串是否包含指定的键名。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams({'foo': 1 , 'bar': 2});\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.has('bar')")]),a._v(" // true\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.has('baz')")]),a._v(" // false\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("h3",{attrs:{id:"_6-urlsearchparams-set"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-urlsearchparams-set"}},[a._v("#")]),a._v(" 6. URLSearchParams.set()")]),a._v(" "),t("p",[a._v("set方法用来设置查询字符串的键值。")]),a._v(" "),t("p",[a._v("它接受两个参数，第一个是键名，第二个是键值。如果是已经存在的键，键值会被改写，否则会被追加。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams('"),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("foo")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("1')")])]),t("span",{pre:!0,attrs:{class:"token pair-delimiter"}},[a._v(";")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.set('foo',")]),a._v(" 2);\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.toString()")]),a._v(' // "foo=2"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.set('bar',")]),a._v(" 3);\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.toString()")]),a._v(' // "foo=2&bar=3"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("p",[a._v("上面代码中，foo是已经存在的键，bar是还不存在的键。")]),a._v(" "),t("p",[a._v("如果有多个的同名键，set会移除现存所有的键。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams('"),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("foo")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("1")])]),t("span",{pre:!0,attrs:{class:"token pair-delimiter"}},[a._v("&")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("foo")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("2')")])]),t("span",{pre:!0,attrs:{class:"token pair-delimiter"}},[a._v(";")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.set('foo',")]),a._v(" 3);\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.toString()")]),a._v(' // "foo=3"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("下面是一个替换当前 URL 的例子。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" URL: https://example.com"),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("version")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("1.0")])])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams(location.search.slice(1));\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.set('version',")]),a._v(" 2.0);\n\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("window.history.replaceState(")]),a._v("{}, '', location.pathname + `"),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")])]),a._v("` + params);\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" URL: https://example.com"),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("version")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("2.0")])])]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br")])]),t("h3",{attrs:{id:"_7-urlsearchparams-get-urlsearchparams-getall"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-urlsearchparams-get-urlsearchparams-getall"}},[a._v("#")]),a._v(" 7. URLSearchParams.get()，URLSearchParams.getAll()")]),a._v(" "),t("p",[a._v("get方法用来读取查询字符串里面的指定键。它接受键名作为参数。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams('"),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("foo")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("1')")])]),t("span",{pre:!0,attrs:{class:"token pair-delimiter"}},[a._v(";")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.get('foo')")]),a._v(' // "1"\n'),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.get('bar')")]),a._v(" // null\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("两个地方需要注意。第一，它返回的是字符串，如果原始值是数值，需要转一下类型；第二，如果指定的键名不存在，返回值是null。")]),a._v(" "),t("p",[a._v("如果有多个的同名键，get返回位置最前面的那个键值。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams('"),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("foo")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("3")])]),t("span",{pre:!0,attrs:{class:"token pair-delimiter"}},[a._v("&")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("foo")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("2")])]),t("span",{pre:!0,attrs:{class:"token pair-delimiter"}},[a._v("&")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("foo")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("1')")])]),t("span",{pre:!0,attrs:{class:"token pair-delimiter"}},[a._v(";")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.get('foo')")]),a._v(' // "3"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("上面代码中，查询字符串有三个foo键，get方法返回最前面的键值3。")]),a._v(" "),t("p",[a._v("getAll方法返回一个数组，成员是指定键的所有键值。它接受键名作为参数。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams('"),t("span",{pre:!0,attrs:{class:"token query"}},[t("span",{pre:!0,attrs:{class:"token query-delimiter"}},[a._v("?")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("foo")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("1")])]),t("span",{pre:!0,attrs:{class:"token pair-delimiter"}},[a._v("&")]),t("span",{pre:!0,attrs:{class:"token pair"}},[t("span",{pre:!0,attrs:{class:"token key"}},[a._v("foo")]),a._v("="),t("span",{pre:!0,attrs:{class:"token value"}},[a._v("2')")])]),t("span",{pre:!0,attrs:{class:"token pair-delimiter"}},[a._v(";")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.getAll('foo')")]),a._v(' // ["1", "2"]\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("上面代码中，查询字符串有两个foo键，getAll返回的数组就有两个成员。")]),a._v(" "),t("h3",{attrs:{id:"_8-urlsearchparams-sort"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-urlsearchparams-sort"}},[a._v("#")]),a._v(" 8. URLSearchParams.sort()")]),a._v(" "),t("p",[a._v("sort方法对查询字符串里面的键进行排序，规则是按照 Unicode 码点从小到大排列。")]),a._v(" "),t("p",[a._v("该方法没有返回值，或者说返回值是undefined。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams('c=4&a=2&b=3&a=1');\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.sort();")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("params.toString()")]),a._v(' // "a=2&a=1&b=3&c=4"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("上面代码中，如果有两个同名的键a，它们之间不会排序，而是保留原始的顺序。")]),a._v(" "),t("h3",{attrs:{id:"_9-urlsearchparams-keys-urlsearchparams-values-urlsearchparams-entries"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-urlsearchparams-keys-urlsearchparams-values-urlsearchparams-entries"}},[a._v("#")]),a._v(" 9. URLSearchParams.keys()，URLSearchParams.values()，URLSearchParams.entries()")]),a._v(" "),t("p",[a._v("这三个方法都返回一个遍历器对象，供for...of循环遍历。它们的区别在于，keys方法返回的是键名的遍历器，values方法返回的是键值的遍历器，entries返回的是键值对的遍历器。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("var")]),a._v(" params = new URLSearchParams('a=1&b=2');\n\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("for(var")]),a._v(" p of params.keys()) {\n  console.log(p);\n}\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" a\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" b\n\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("for(var")]),a._v(" p of params.values()) {\n  console.log(p);\n}\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" 1\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" 2\n\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("for(var")]),a._v(" p of params.entries()) {\n  console.log(p);\n}\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' ["a", "1"]\n'),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(' ["b", "2"]\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br")])]),t("p",[a._v("如果直接对URLSearchParams进行遍历，其实内部调用的就是entries接口。")]),a._v(" "),t("div",{staticClass:"language-url line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-url"}},[t("code",[t("span",{pre:!0,attrs:{class:"token path"}},[a._v("for")]),a._v(" (var p of params) {}\n"),t("span",{pre:!0,attrs:{class:"token authority"}},[t("span",{pre:!0,attrs:{class:"token authority-delimiter"}},[a._v("//")])]),a._v(" 等同于\n"),t("span",{pre:!0,attrs:{class:"token path"}},[a._v("for")]),a._v(" (var p of params.entries()) {}\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);