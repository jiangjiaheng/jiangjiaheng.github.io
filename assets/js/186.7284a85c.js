(window.webpackJsonp=window.webpackJsonp||[]).push([[186],{503:function(e,t,n){"use strict";n.r(t);var a=n(17),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"表单事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#表单事件"}},[e._v("#")]),e._v(" 表单事件")]),e._v(" "),n("h2",{attrs:{id:"表单事件的种类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#表单事件的种类"}},[e._v("#")]),e._v(" 表单事件的种类")]),e._v(" "),n("h3",{attrs:{id:"_1-input-事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-input-事件"}},[e._v("#")]),e._v(" 1. input 事件")]),e._v(" "),n("p",[e._v("input事件当"),n("code",[e._v("<input>")]),e._v("、"),n("code",[e._v("<select>")]),e._v("、"),n("code",[e._v("<textarea>")]),e._v("的值发生变化时触发。对于复选框（"),n("code",[e._v("<input type=checkbox>")]),e._v("）或单选框（"),n("code",[e._v("<input type=radio>")]),e._v("），用户改变选项时，也会触发这个事件。另外，对于打开contenteditable属性的元素，只要值发生变化，也会触发input事件。")]),e._v(" "),n("p",[e._v("input事件的一个特点，就是会连续触发，比如用户每按下一次按键，就会触发一次input事件。")]),e._v(" "),n("p",[e._v("input事件对象继承了InputEvent接口。")]),e._v(" "),n("p",[e._v("该事件跟change事件很像，不同之处在于input事件在元素的值发生变化后立即发生，而change在元素失去焦点时发生，而内容此时可能已经变化多次。也就是说，如果有连续变化，input事件会触发多次，而change事件只在失去焦点时触发一次。")]),e._v(" "),n("p",[e._v("下面是"),n("code",[e._v("<select>")]),e._v("元素的例子。")]),e._v(" "),n("div",{staticClass:"language-event line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('/* HTML 代码如下\n<select id="mySelect">\n  <option value="1">1</option>\n  <option value="2">2</option>\n  <option value="3">3</option>\n</select>\n*/\n\nfunction inputHandler(e) {\n  console.log(e.target.value)\n}\n\nvar mySelect = document.querySelector(\'#mySelect\');\nmySelect.addEventListener(\'input\', inputHandler);\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br")])]),n("p",[e._v("上面代码中，改变下拉框选项时，会触发input事件，从而执行回调函数inputHandler。")]),e._v(" "),n("h3",{attrs:{id:"_2-select-事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-select-事件"}},[e._v("#")]),e._v(" 2. select 事件")]),e._v(" "),n("p",[e._v("select事件当在"),n("code",[e._v("<input>")]),e._v("、"),n("code",[e._v("<textarea>")]),e._v("里面选中文本时触发。")]),e._v(" "),n("div",{staticClass:"language-event line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('// HTML 代码如下\n// <input id="test" type="text" value="Select me!" />\n\nvar elem = document.getElementById(\'test\');\nelem.addEventListener(\'select\', function (e) {\n  console.log(e.type); // "select"\n}, false);\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br")])]),n("p",[e._v("选中的文本可以通过event.target元素的selectionDirection、selectionEnd、selectionStart和value属性拿到。")]),e._v(" "),n("h3",{attrs:{id:"_3-change-事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-change-事件"}},[e._v("#")]),e._v(" 3. change 事件")]),e._v(" "),n("p",[e._v("change事件当"),n("code",[e._v("<input>")]),e._v("、"),n("code",[e._v("<select>")]),e._v("、"),n("code",[e._v("<textarea>")]),e._v("的值发生变化时触发。它与input事件的最大不同，就是不会连续触发，只有当全部修改完成时才会触发，另一方面input事件必然伴随change事件。具体来说，分成以下几种情况。")]),e._v(" "),n("ul",[n("li",[e._v("激活单选框（radio）或复选框（checkbox）时触发。")]),e._v(" "),n("li",[e._v("用户提交时触发。比如，从下列列表（select）完成选择，在日期或文件输入框完成选择。")]),e._v(" "),n("li",[e._v("当文本框或"),n("code",[e._v("<textarea>")]),e._v("元素的值发生改变，并且丧失焦点时触发。")])]),e._v(" "),n("p",[e._v("下面是一个例子。")]),e._v(" "),n("div",{staticClass:"language-event line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('// HTML 代码如下\n// <select size="1" onchange="changeEventHandler(event);">\n//   <option>chocolate</option>\n//   <option>strawberry</option>\n//   <option>vanilla</option>\n// </select>\n\nfunction changeEventHandler(event) {\n  console.log(event.target.value);\n}\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br")])]),n("p",[e._v("如果比较一下上面input事件的例子，你会发现对于"),n("code",[e._v("<select>")]),e._v("元素来说，input和change事件基本是等价的。")]),e._v(" "),n("h3",{attrs:{id:"_4-invalid-事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-invalid-事件"}},[e._v("#")]),e._v(" 4. invalid 事件")]),e._v(" "),n("p",[e._v("用户提交表单时，如果表单元素的值不满足校验条件，就会触发invalid事件。")]),e._v(" "),n("div",{staticClass:"language-event line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('<form>\n  <input type="text" required oninvalid="console.log(\'invalid input\')" />\n  <button type="submit">提交</button>\n</form>\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br")])]),n("p",[e._v("上面代码中，输入框是必填的。如果不填，用户点击按钮提交时，就会触发输入框的invalid事件，导致提交被取消。")]),e._v(" "),n("h3",{attrs:{id:"_5-reset-事件-submit-事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-reset-事件-submit-事件"}},[e._v("#")]),e._v(" 5. reset 事件，submit 事件")]),e._v(" "),n("p",[e._v("这两个事件发生在表单对象"),n("code",[e._v("<form>")]),e._v("上，而不是发生在表单的成员上。")]),e._v(" "),n("p",[e._v("reset事件当表单重置（所有表单成员变回默认值）时触发。")]),e._v(" "),n("p",[e._v("submit事件当表单数据向服务器提交时触发。注意，submit事件的发生对象是"),n("code",[e._v("<form>")]),e._v("元素，而不是"),n("code",[e._v("<button>")]),e._v("元素，因为提交的是表单，而不是按钮。")]),e._v(" "),n("h2",{attrs:{id:"inputevent-接口"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#inputevent-接口"}},[e._v("#")]),e._v(" InputEvent 接口")]),e._v(" "),n("p",[e._v("InputEvent接口主要用来描述input事件的实例。该接口继承了Event接口，还定义了一些自己的实例属性和实例方法。")]),e._v(" "),n("p",[e._v("浏览器原生提供InputEvent()构造函数，用来生成实例对象。")]),e._v(" "),n("div",{staticClass:"language-event line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("new InputEvent(type, options)\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("InputEvent构造函数可以接受两个参数。第一个参数是字符串，表示事件名称，该参数是必需的。第二个参数是一个配置对象，用来设置事件实例的属性，该参数是可选的。配置对象的字段除了Event构造函数的配置属性，还可以设置下面的字段，这些字段都是可选的。")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("inputType")]),e._v("：字符串，表示发生变更的类型（详见下文）。")]),e._v(" "),n("li",[n("code",[e._v("data")]),e._v("：字符串，表示插入的字符串。如果没有插入的字符串（比如删除操作），则返回null或空字符串。")]),e._v(" "),n("li",[n("code",[e._v("dataTransfer")]),e._v("：返回一个 DataTransfer 对象实例，该属性通常只在输入框接受富文本输入时有效。")])]),e._v(" "),n("p",[e._v("InputEvent的实例属性主要就是上面三个属性，这三个实例属性都是只读的。")]),e._v(" "),n("h3",{attrs:{id:"_1-inputevent-data"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-inputevent-data"}},[e._v("#")]),e._v(" （1）InputEvent.data")]),e._v(" "),n("p",[e._v("InputEvent.data属性返回一个字符串，表示变动的内容。")]),e._v(" "),n("div",{staticClass:"language-event line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("// HTML 代码如下\n// <input type=\"text\" id=\"myInput\">\nvar input = document.getElementById('myInput');\ninput.addEventListener('input', myFunction, false);\n\nfunction myFunction(e) {\n  console.log(e.data);\n}\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br")])]),n("p",[e._v("上面代码中，如果手动在输入框里面输入abc，控制台会先输出a，再在下一行输出b，再在下一行输出c。然后选中abc，一次性将它们删除，控制台会输出null或一个空字符串。")]),e._v(" "),n("h3",{attrs:{id:"_2-inputevent-inputtype"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-inputevent-inputtype"}},[e._v("#")]),e._v(" （2）InputEvent.inputType")]),e._v(" "),n("p",[e._v("InputEvent.inputType属性返回一个字符串，表示字符串发生变更的类型。")]),e._v(" "),n("p",[e._v("对于常见情况，Chrome 浏览器的返回值如下。完整列表可以参考文档。")]),e._v(" "),n("ul",[n("li",[e._v("手动插入文本：insertText")]),e._v(" "),n("li",[e._v("粘贴插入文本：insertFromPaste")]),e._v(" "),n("li",[e._v("向后删除：deleteContentBackward")]),e._v(" "),n("li",[e._v("向前删除：deleteContentForward")])]),e._v(" "),n("h3",{attrs:{id:"_3-inputevent-datatransfer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-inputevent-datatransfer"}},[e._v("#")]),e._v(" （3）InputEvent.dataTransfer")]),e._v(" "),n("p",[e._v("InputEvent.dataTransfer属性返回一个 DataTransfer 实例。该属性只在文本框接受粘贴内容（insertFromPaste）或拖拽内容（insertFromDrop）时才有效。")])])}),[],!1,null,null,null);t.default=s.exports}}]);