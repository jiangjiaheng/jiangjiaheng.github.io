(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{461:function(e,s,t){"use strict";t.r(s);var a=t(17),n=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"css-操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#css-操作"}},[e._v("#")]),e._v(" CSS 操作")]),e._v(" "),t("p",[e._v("CSS 与 JavaScript 是两个有着明确分工的领域，前者负责页面的视觉效果，后者负责与用户的行为互动。但是，它们毕竟同属网页开发的前端，因此不可避免有着交叉和互相配合。本节介绍如何通过 JavaScript 操作 CSS。")]),e._v(" "),t("h2",{attrs:{id:"html-元素的-style-属性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#html-元素的-style-属性"}},[e._v("#")]),e._v(" HTML 元素的 style 属性")]),e._v(" "),t("p",[e._v("操作 CSS 样式最简单的方法，就是使用网页元素节点的getAttribute方法、setAttribute方法和removeAttribute方法，直接读写或删除网页元素的style属性。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("div.setAttribute(\n  'style',\n  'background-color:red;' + 'border:1px solid black;'\n);\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("p",[e._v("上面的代码相当于下面的 HTML 代码。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('<div style="background-color:red; border:1px solid black;" />\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("style不仅可以使用字符串读写，它本身还是一个对象，部署了 CSSStyleDeclaration 接口（详见下面的介绍），可以直接读写个别属性。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("e.style.fontSize = '18px';\ne.style.color = 'black';\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("h2",{attrs:{id:"cssstyledeclaration-接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cssstyledeclaration-接口"}},[e._v("#")]),e._v(" CSSStyleDeclaration 接口")]),e._v(" "),t("h3",{attrs:{id:"_1-简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-简介"}},[e._v("#")]),e._v(" 1. 简介")]),e._v(" "),t("p",[e._v("CSSStyleDeclaration 接口用来操作元素的样式。三个地方部署了这个接口。")]),e._v(" "),t("ul",[t("li",[e._v("元素节点的style属性（Element.style）")]),e._v(" "),t("li",[e._v("CSSStyle实例的style属性")]),e._v(" "),t("li",[e._v("window.getComputedStyle()的返回值")])]),e._v(" "),t("p",[e._v("CSSStyleDeclaration 接口可以直接读写 CSS 的样式属性，不过，连词号需要变成骆驼拼写法。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var divStyle = document.querySelector('div').style;\n\ndivStyle.backgroundColor = 'red';\ndivStyle.border = '1px solid black';\ndivStyle.width = '100px';\ndivStyle.height = '100px';\ndivStyle.fontSize = '10em';\n\ndivStyle.backgroundColor // red\ndivStyle.border // 1px solid black\ndivStyle.height // 100px\ndivStyle.width // 100px\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br")])]),t("p",[e._v("上面代码中，style属性的值是一个 CSSStyleDeclaration 实例。这个对象所包含的属性与 CSS 规则一一对应，但是名字需要改写，比如background-color写成backgroundColor。改写的规则是将横杠从 CSS 属性名中去除，然后将横杠后的第一个字母大写。如果 CSS 属性名是 JavaScript 保留字，则规则名之前需要加上字符串css，比如float写成cssFloat。")]),e._v(" "),t("p",[e._v("注意，该对象的属性值都是字符串，设置时必须包括单位，但是不含规则结尾的分号。比如，divStyle.width不能写为100，而要写为100px。")]),e._v(" "),t("p",[e._v("另外，Element.style返回的只是行内样式，并不是该元素的全部样式。通过样式表设置的样式，或者从父元素继承的样式，无法通过这个属性得到。元素的全部样式要通过window.getComputedStyle()得到。")]),e._v(" "),t("h3",{attrs:{id:"_2-cssstyledeclaration-实例属性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-cssstyledeclaration-实例属性"}},[e._v("#")]),e._v(" 2. CSSStyleDeclaration 实例属性")]),e._v(" "),t("h4",{attrs:{id:"_1-cssstyledeclaration-csstext"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-cssstyledeclaration-csstext"}},[e._v("#")]),e._v(" （1）CSSStyleDeclaration.cssText")]),e._v(" "),t("p",[e._v("CSSStyleDeclaration.cssText属性用来读写当前规则的所有样式声明文本。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var divStyle = document.querySelector('div').style;\n\ndivStyle.cssText = 'background-color: red;'\n  + 'border: 1px solid black;'\n  + 'height: 100px;'\n  + 'width: 100px;';\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br")])]),t("p",[e._v("注意，cssText的属性值不用改写 CSS 属性名。")]),e._v(" "),t("p",[e._v("删除一个元素的所有行内样式，最简便的方法就是设置cssText为空字符串。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("divStyle.cssText = '';\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h4",{attrs:{id:"_2-cssstyledeclaration-length"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-cssstyledeclaration-length"}},[e._v("#")]),e._v(" （2）CSSStyleDeclaration.length")]),e._v(" "),t("p",[e._v("CSSStyleDeclaration.length属性返回一个整数值，表示当前规则包含多少条样式声明。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// HTML 代码如下\n// <div id="myDiv"\n//   style="height: 1px;width: 100%;background-color: #CA1;"\n// ></div>\nvar myDiv = document.getElementById(\'myDiv\');\nvar divStyle = myDiv.style;\ndivStyle.length // 3\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br")])]),t("p",[e._v("上面代码中，myDiv元素的行内样式共包含3条样式规则。")]),e._v(" "),t("h4",{attrs:{id:"_3-cssstyledeclaration-parentrule"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-cssstyledeclaration-parentrule"}},[e._v("#")]),e._v(" （3）CSSStyleDeclaration.parentRule")]),e._v(" "),t("p",[e._v("CSSStyleDeclaration.parentRule属性返回当前规则所属的那个样式块（CSSRule 实例）。如果不存在所属的样式块，该属性返回null。")]),e._v(" "),t("p",[e._v("该属性只读，且只在使用 CSSRule 接口时有意义。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var declaration = document.styleSheets[0].rules[0].style;\ndeclaration.parentRule === document.styleSheets[0].rules[0]\n// true\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("h3",{attrs:{id:"_3-cssstyledeclaration-实例方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-cssstyledeclaration-实例方法"}},[e._v("#")]),e._v(" 3. CSSStyleDeclaration 实例方法")]),e._v(" "),t("h4",{attrs:{id:"_1-cssstyledeclaration-getpropertypriority"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-cssstyledeclaration-getpropertypriority"}},[e._v("#")]),e._v(" （1）CSSStyleDeclaration.getPropertyPriority()")]),e._v(" "),t("p",[e._v("CSSStyleDeclaration.getPropertyPriority方法接受 CSS 样式的属性名作为参数，返回一个字符串，表示有没有设置important优先级。如果有就返回important，否则返回空字符串。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// HTML 代码为\n// <div id="myDiv" style="margin: 10px!important; color: red;"/>\nvar style = document.getElementById(\'myDiv\').style;\nstyle.margin // "10px"\nstyle.getPropertyPriority(\'margin\') // "important"\nstyle.getPropertyPriority(\'color\') // ""\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br")])]),t("p",[e._v("上面代码中，margin属性有important优先级，color属性没有。")]),e._v(" "),t("h4",{attrs:{id:"_2-cssstyledeclaration-getpropertyvalue"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-cssstyledeclaration-getpropertyvalue"}},[e._v("#")]),e._v(" （2）CSSStyleDeclaration.getPropertyValue()")]),e._v(" "),t("p",[e._v("CSSStyleDeclaration.getPropertyValue方法接受 CSS 样式属性名作为参数，返回一个字符串，表示该属性的属性值。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// HTML 代码为\n// <div id="myDiv" style="margin: 10px!important; color: red;"/>\nvar style = document.getElementById(\'myDiv\').style;\nstyle.margin // "10px"\nstyle.getPropertyValue("margin") // "10px"\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br")])]),t("h4",{attrs:{id:"_3-cssstyledeclaration-item"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-cssstyledeclaration-item"}},[e._v("#")]),e._v(" （3）CSSStyleDeclaration.item()")]),e._v(" "),t("p",[e._v("CSSStyleDeclaration.item方法接受一个整数值作为参数，返回该位置的 CSS 属性名。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// HTML 代码为\n// <div id="myDiv" style="color: red; background-color: white;"/>\nvar style = document.getElementById(\'myDiv\').style;\nstyle.item(0) // "color"\nstyle.item(1) // "background-color"\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br")])]),t("p",[e._v("上面代码中，0号位置的 CSS 属性名是color，1号位置的 CSS 属性名是background-color。")]),e._v(" "),t("p",[e._v("如果没有提供参数，这个方法会报错。如果参数值超过实际的属性数目，这个方法返回一个空字符值。")]),e._v(" "),t("h4",{attrs:{id:"_4-cssstyledeclaration-removeproperty"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-cssstyledeclaration-removeproperty"}},[e._v("#")]),e._v(" （4）CSSStyleDeclaration.removeProperty()")]),e._v(" "),t("p",[e._v("CSSStyleDeclaration.removeProperty方法接受一个属性名作为参数，在 CSS 规则里面移除这个属性，返回这个属性原来的值。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// HTML 代码为\n// <div id="myDiv" style="color: red; background-color: white;">\n//   111\n// </div>\nvar style = document.getElementById(\'myDiv\').style;\nstyle.removeProperty(\'color\') // \'red\'\n// HTML 代码变为\n// <div id="myDiv" style="background-color: white;">\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br")])]),t("p",[e._v("上面代码中，删除color属性以后，字体颜色从红色变成默认颜色。")]),e._v(" "),t("h4",{attrs:{id:"_5-cssstyledeclaration-setproperty"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-cssstyledeclaration-setproperty"}},[e._v("#")]),e._v(" （5）CSSStyleDeclaration.setProperty()")]),e._v(" "),t("p",[e._v("CSSStyleDeclaration.setProperty方法用来设置新的 CSS 属性。该方法没有返回值。")]),e._v(" "),t("p",[e._v("该方法可以接受三个参数。")]),e._v(" "),t("ul",[t("li",[e._v("第一个参数：属性名，该参数是必需的。")]),e._v(" "),t("li",[e._v("第二个参数：属性值，该参数可选。如果省略，则参数值默认为空字符串。")]),e._v(" "),t("li",[e._v("第三个参数：优先级，该参数可选。如果设置，唯一的合法值是important，表示 CSS 规则里面的!important。")])]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("// HTML 代码为\n// <div id=\"myDiv\" style=\"color: red; background-color: white;\">\n//   111\n// </div>\nvar style = document.getElementById('myDiv').style;\nstyle.setProperty('border', '1px solid blue');\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br")])]),t("p",[e._v("上面代码执行后，myDiv元素就会出现蓝色的边框。")]),e._v(" "),t("h2",{attrs:{id:"css-模块的侦测"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#css-模块的侦测"}},[e._v("#")]),e._v(" CSS 模块的侦测")]),e._v(" "),t("p",[e._v("CSS 的规格发展太快，新的模块层出不穷。不同浏览器的不同版本，对 CSS 模块的支持情况都不一样。有时候，需要知道当前浏览器是否支持某个模块，这就叫做“CSS模块的侦测”。")]),e._v(" "),t("p",[e._v("一个比较普遍适用的方法是，判断元素的style对象的某个属性值是否为字符串。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("typeof element.style.animationName === 'string';\ntypeof element.style.transform === 'string';\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[e._v("如果该 CSS 属性确实存在，会返回一个字符串。即使该属性实际上并未设置，也会返回一个空字符串。如果该属性不存在，则会返回undefined。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("document.body.style['maxWidth'] // \"\"\ndocument.body.style['maximumWidth'] // undefined\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[e._v("上面代码说明，这个浏览器支持max-width属性，但是不支持maximum-width属性。")]),e._v(" "),t("p",[e._v("注意，不管 CSS 属性名的写法带不带连词线，style属性上都能反映出该属性是否存在。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("document.body.style['backgroundColor'] // \"\"\ndocument.body.style['background-color'] // \"\"\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[e._v("另外，使用的时候，需要把不同浏览器的 CSS 前缀也考虑进去。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var content = document.getElementById('content');\ntypeof content.style['webkitAnimation'] === 'string'\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[e._v("这种侦测方法可以写成一个函数。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("function isPropertySupported(property) {\n  if (property in document.body.style) return true;\n  var prefixes = ['Moz', 'Webkit', 'O', 'ms', 'Khtml'];\n  var prefProperty = property.charAt(0).toUpperCase() + property.substr(1);\n\n  for(var i = 0; i < prefixes.length; i++){\n    if((prefixes[i] + prefProperty) in document.body.style) return true;\n  }\n\n  return false;\n}\n\nisPropertySupported('background-clip')\n// true\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br"),t("span",{staticClass:"line-number"},[e._v("13")]),t("br"),t("span",{staticClass:"line-number"},[e._v("14")]),t("br")])]),t("h2",{attrs:{id:"css-对象"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#css-对象"}},[e._v("#")]),e._v(" CSS 对象")]),e._v(" "),t("p",[e._v("浏览器原生提供 CSS 对象，为 JavaScript 操作 CSS 提供一些工具方法。")]),e._v(" "),t("p",[e._v("这个对象目前有两个静态方法。")]),e._v(" "),t("h3",{attrs:{id:"_1-css-escape"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-css-escape"}},[e._v("#")]),e._v(" 1. CSS.escape()")]),e._v(" "),t("p",[e._v("CSS.escape方法用于转义 CSS 选择器里面的特殊字符。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('<div id="foo#bar">\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("上面代码中，该元素的id属性包含一个#号，该字符在 CSS 选择器里面有特殊含义。不能直接写成document.querySelector('#foo#bar')，只能写成document.querySelector('#foo\\#bar')。这里必须使用双斜杠的原因是，单引号字符串本身会转义一次斜杠。")]),e._v(" "),t("p",[e._v("CSS.escape方法就用来转义那些特殊字符。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("document.querySelector('#' + CSS.escape('foo#bar'))\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h3",{attrs:{id:"_2-css-supports"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-css-supports"}},[e._v("#")]),e._v(" 2. CSS.supports()")]),e._v(" "),t("p",[e._v("CSS.supports方法返回一个布尔值，表示当前环境是否支持某一句 CSS 规则。")]),e._v(" "),t("p",[e._v("它的参数有两种写法，一种是第一个参数是属性名，第二个参数是属性值；另一种是整个参数就是一行完整的 CSS 语句。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("// 第一种写法\nCSS.supports('transform-origin', '5px') // true\n\n// 第二种写法\nCSS.supports('display: table-cell') // true\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br")])]),t("p",[e._v("注意，第二种写法的参数结尾不能带有分号，否则结果不准确。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("CSS.supports('display: table-cell;') // false\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h2",{attrs:{id:"window-getcomputedstyle"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#window-getcomputedstyle"}},[e._v("#")]),e._v(" window.getComputedStyle()")]),e._v(" "),t("p",[e._v("行内样式（inline style）具有最高的优先级，改变行内样式，通常会立即反映出来。但是，网页元素最终的样式是综合各种规则计算出来的。因此，如果想得到元素实际的样式，只读取行内样式是不够的，需要得到浏览器最终计算出来的样式规则。")]),e._v(" "),t("p",[e._v("window.getComputedStyle方法，就用来返回浏览器计算后得到的最终规则。它接受一个节点对象作为参数，返回一个 CSSStyleDeclaration 实例，包含了指定节点的最终样式信息。所谓“最终样式信息”，指的是各种 CSS 规则叠加后的结果。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var div = document.querySelector('div');\nvar styleObj = window.getComputedStyle(div);\nstyleObj.backgroundColor\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("p",[e._v("上面代码中，得到的背景色就是div元素真正的背景色。")]),e._v(" "),t("p",[e._v("注意，CSSStyleDeclaration 实例是一个活的对象，任何对于样式的修改，会实时反映到这个实例上面。另外，这个实例是只读的。")]),e._v(" "),t("p",[e._v("getComputedStyle方法还可以接受第二个参数，表示当前元素的伪元素（比如:before、:after、:first-line、:first-letter等）。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var result = window.getComputedStyle(div, ':before');\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("下面的例子是如何获取元素的高度。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var elem = document.getElementById('elem-container');\nvar styleObj = window.getComputedStyle(elem, null)\nvar height = styleObj.height;\n// 等同于\nvar height = styleObj['height'];\nvar height = styleObj.getPropertyValue('height');\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br")])]),t("p",[e._v("上面代码得到的height属性，是浏览器最终渲染出来的高度，比其他方法得到的高度更可靠。由于styleObj是 CSSStyleDeclaration 实例，所以可以使用各种 CSSStyleDeclaration 的实例属性和方法。")]),e._v(" "),t("p",[e._v("有几点需要注意。")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("CSSStyleDeclaration 实例返回的 CSS 值都是绝对单位。比如，长度都是像素单位（返回值包括px后缀），颜色是rgb(#, #, #)或rgba(#, #, #, #)格式。")])]),e._v(" "),t("li",[t("p",[e._v("CSS 规则的简写形式无效。比如，想读取margin属性的值，不能直接读，只能读marginLeft、marginTop等属性；再比如，font属性也是不能直接读的，只能读font-size等单个属性。")])]),e._v(" "),t("li",[t("p",[e._v("如果读取 CSS 原始的属性名，要用方括号运算符，比如styleObj['z-index']；如果读取骆驼拼写法的 CSS 属性名，可以直接读取styleObj.zIndex。")])]),e._v(" "),t("li",[t("p",[e._v("该方法返回的 CSSStyleDeclaration 实例的cssText属性无效，返回undefined。")])])]),e._v(" "),t("h2",{attrs:{id:"css-伪元素"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#css-伪元素"}},[e._v("#")]),e._v(" CSS 伪元素")]),e._v(" "),t("p",[e._v("CSS 伪元素是通过 CSS 向 DOM 添加的元素，主要是通过:before和:after选择器生成，然后用content属性指定伪元素的内容。")]),e._v(" "),t("p",[e._v("下面是一段 HTML 代码。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('<div id="test">Test content</div>\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("CSS 添加伪元素:before的写法如下。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("#test:before {\n  content: 'Before ';\n  color: #FF0;\n}\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("p",[e._v("节点元素的style对象无法读写伪元素的样式，这时就要用到window.getComputedStyle()。JavaScript 获取伪元素，可以使用下面的方法。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var test = document.querySelector('#test');\n\nvar result = window.getComputedStyle(test, ':before').content;\nvar color = window.getComputedStyle(test, ':before').color;\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("p",[e._v("此外，也可以使用 CSSStyleDeclaration 实例的getPropertyValue方法，获取伪元素的属性。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var result = window.getComputedStyle(test, ':before')\n  .getPropertyValue('content');\nvar color = window.getComputedStyle(test, ':before')\n  .getPropertyValue('color');\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("h2",{attrs:{id:"stylesheet-接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stylesheet-接口"}},[e._v("#")]),e._v(" StyleSheet 接口")]),e._v(" "),t("h3",{attrs:{id:"_1-概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-概述"}},[e._v("#")]),e._v(" 1. 概述")]),e._v(" "),t("p",[e._v("StyleSheet接口代表网页的一张样式表，包括"),t("code",[e._v("<link>")]),e._v("元素加载的样式表和"),t("code",[e._v("<style>")]),e._v("元素内嵌的样式表。")]),e._v(" "),t("p",[e._v("document对象的styleSheets属性，可以返回当前页面的所有StyleSheet实例（即所有样式表）。它是一个类似数组的对象。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var sheets = document.styleSheets;\nvar sheet = document.styleSheets[0];\nsheet instanceof StyleSheet // true\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("p",[e._v("如果是"),t("code",[e._v("<style>")]),e._v("元素嵌入的样式表，还有另一种获取StyleSheet实例的方法，就是这个节点元素的sheet属性。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("// HTML 代码为 <style id=\"myStyle\"></style>\nvar myStyleSheet = document.getElementById('myStyle').sheet;\nmyStyleSheet instanceof StyleSheet // true\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("p",[e._v("严格地说，StyleSheet接口不仅包括网页样式表，还包括 XML 文档的样式表。所以，它有一个子类CSSStyleSheet表示网页的 CSS 样式表。我们在网页里面拿到的样式表实例，实际上是CSSStyleSheet的实例。这个子接口继承了StyleSheet的所有属性和方法，并且定义了几个自己的属性，下面把这两个接口放在一起介绍。")]),e._v(" "),t("h3",{attrs:{id:"_2-实例属性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-实例属性"}},[e._v("#")]),e._v(" 2. 实例属性")]),e._v(" "),t("p",[e._v("StyleSheet实例有以下属性。")]),e._v(" "),t("h4",{attrs:{id:"_1-stylesheet-disabled"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-stylesheet-disabled"}},[e._v("#")]),e._v(" （1）StyleSheet.disabled")]),e._v(" "),t("p",[e._v("StyleSheet.disabled返回一个布尔值，表示该样式表是否处于禁用状态。手动设置disabled属性为true，等同于在"),t("code",[e._v("<link>")]),e._v("元素里面，将这张样式表设为alternate stylesheet，即该样式表将不会生效。")]),e._v(" "),t("p",[e._v("注意，disabled属性只能在 JavaScript 脚本中设置，不能在 HTML 语句中设置。")]),e._v(" "),t("h4",{attrs:{id:"_2-stylesheet-href"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-stylesheet-href"}},[e._v("#")]),e._v(" （2）Stylesheet.href")]),e._v(" "),t("p",[e._v("Stylesheet.href返回样式表的网址。对于内嵌样式表，该属性返回null。该属性只读。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("document.styleSheets[0].href\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h4",{attrs:{id:"_3-stylesheet-media"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-stylesheet-media"}},[e._v("#")]),e._v(" （3）StyleSheet.media")]),e._v(" "),t("p",[e._v("StyleSheet.media属性返回一个类似数组的对象（MediaList实例），成员是表示适用媒介的字符串。表示当前样式表是用于屏幕（screen），还是用于打印（print）或手持设备（handheld），或各种媒介都适用（all）。该属性只读，默认值是screen。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('document.styleSheets[0].media.mediaText\n// "all"\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[e._v("MediaList实例的appendMedium方法，用于增加媒介；deleteMedium方法用于删除媒介。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("document.styleSheets[0].media.appendMedium('handheld');\ndocument.styleSheets[0].media.deleteMedium('print');\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("h4",{attrs:{id:"_4-stylesheet-title"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-stylesheet-title"}},[e._v("#")]),e._v(" （4）StyleSheet.title")]),e._v(" "),t("p",[e._v("StyleSheet.title属性返回样式表的title属性。")]),e._v(" "),t("h4",{attrs:{id:"_5-stylesheet-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-stylesheet-type"}},[e._v("#")]),e._v(" （5）StyleSheet.type")]),e._v(" "),t("p",[e._v("StyleSheet.type属性返回样式表的type属性，通常是text/css。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('document.styleSheets[0].type  // "text/css"\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h4",{attrs:{id:"_6-stylesheet-parentstylesheet"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-stylesheet-parentstylesheet"}},[e._v("#")]),e._v(" （6）StyleSheet.parentStyleSheet")]),e._v(" "),t("p",[e._v("CSS 的@import命令允许在样式表中加载其他样式表。StyleSheet.parentStyleSheet属性返回包含了当前样式表的那张样式表。如果当前样式表是顶层样式表，则该属性返回null。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("if (stylesheet.parentStyleSheet) {\n  sheet = stylesheet.parentStyleSheet;\n} else {\n  sheet = stylesheet;\n}\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br")])]),t("h4",{attrs:{id:"_7-stylesheet-ownernode"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-stylesheet-ownernode"}},[e._v("#")]),e._v(" （7）StyleSheet.ownerNode")]),e._v(" "),t("p",[e._v("StyleSheet.ownerNode属性返回StyleSheet对象所在的 DOM 节点，通常是"),t("code",[e._v("<link>")]),e._v("或"),t("code",[e._v("<style>")]),e._v("。对于那些由其他样式表引用的样式表，该属性为null。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// HTML代码为\n// <link rel="StyleSheet" href="example.css" type="text/css" />\ndocument.styleSheets[0].ownerNode // [object HTMLLinkElement]\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("h4",{attrs:{id:"_8-cssstylesheet-cssrules"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-cssstylesheet-cssrules"}},[e._v("#")]),e._v(" （8）CSSStyleSheet.cssRules")]),e._v(" "),t("p",[e._v("CSSStyleSheet.cssRules属性指向一个类似数组的对象（CSSRuleList实例），里面每一个成员就是当前样式表的一条 CSS 规则。使用该规则的cssText属性，可以得到 CSS 规则对应的字符串。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('var sheet = document.querySelector(\'#styleElement\').sheet;\n\nsheet.cssRules[0].cssText\n// "body { background-color: red; margin: 20px; }"\n\nsheet.cssRules[1].cssText\n// "p { line-height: 1.4em; color: blue; }"\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br")])]),t("p",[e._v("每条 CSS 规则还有一个style属性，指向一个对象，用来读写具体的 CSS 命令。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("cssStyleSheet.cssRules[0].style.color = 'red';\ncssStyleSheet.cssRules[1].style.color = 'purple';\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("h4",{attrs:{id:"_9-cssstylesheet-ownerrule"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-cssstylesheet-ownerrule"}},[e._v("#")]),e._v(" （9）CSSStyleSheet.ownerRule")]),e._v(" "),t("p",[e._v("有些样式表是通过@import规则输入的，它的ownerRule属性会返回一个CSSRule实例，代表那行@import规则。如果当前样式表不是通过@import引入的，ownerRule属性返回null。")]),e._v(" "),t("h3",{attrs:{id:"_3-实例方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-实例方法"}},[e._v("#")]),e._v(" 3. 实例方法")]),e._v(" "),t("h4",{attrs:{id:"_1-cssstylesheet-insertrule"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-cssstylesheet-insertrule"}},[e._v("#")]),e._v(" （1）CSSStyleSheet.insertRule()")]),e._v(" "),t("p",[e._v("CSSStyleSheet.insertRule方法用于在当前样式表的插入一个新的 CSS 规则。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var sheet = document.querySelector('#styleElement').sheet;\nsheet.insertRule('#block { color: white }', 0);\nsheet.insertRule('p { color: red }', 1);\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("p",[e._v("该方法可以接受两个参数，第一个参数是表示 CSS 规则的字符串，这里只能有一条规则，否则会报错。第二个参数是该规则在样式表的插入位置（从0开始），该参数可选，默认为0（即默认插在样式表的头部）。注意，如果插入位置大于现有规则的数目，会报错。")]),e._v(" "),t("p",[e._v("该方法的返回值是新插入规则的位置序号。")]),e._v(" "),t("p",[e._v("注意，浏览器对脚本在样式表里面插入规则有很多限制。所以，这个方法最好放在try...catch里使用。")]),e._v(" "),t("h4",{attrs:{id:"_2-cssstylesheet-deleterule"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-cssstylesheet-deleterule"}},[e._v("#")]),e._v(" （2）CSSStyleSheet.deleteRule()")]),e._v(" "),t("p",[e._v("CSSStyleSheet.deleteRule方法用来在样式表里面移除一条规则，它的参数是该条规则在cssRules对象中的位置。该方法没有返回值。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("document.styleSheets[0].deleteRule(1);\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h2",{attrs:{id:"实例-添加样式表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例-添加样式表"}},[e._v("#")]),e._v(" 实例：添加样式表")]),e._v(" "),t("p",[e._v("网页添加样式表有两种方式。一种是添加一张内置样式表，即在文档中添加一个"),t("code",[e._v("<style>")]),e._v("节点。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("// 写法一\nvar style = document.createElement('style');\nstyle.setAttribute('media', 'screen');\nstyle.innerHTML = 'body{color:red}';\ndocument.head.appendChild(style);\n\n// 写法二\nvar style = (function () {\n  var style = document.createElement('style');\n  document.head.appendChild(style);\n  return style;\n})();\nstyle.sheet.insertRule('.foo{color:red;}', 0);\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br"),t("span",{staticClass:"line-number"},[e._v("13")]),t("br")])]),t("p",[e._v("另一种是添加外部样式表，即在文档中添加一个"),t("code",[e._v("<link>")]),e._v("节点，然后将href属性指向外部样式表的 URL。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var linkElm = document.createElement('link');\nlinkElm.setAttribute('rel', 'stylesheet');\nlinkElm.setAttribute('type', 'text/css');\nlinkElm.setAttribute('href', 'reset-min.css');\n\ndocument.head.appendChild(linkElm);\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br")])]),t("h2",{attrs:{id:"cssrulelist-接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cssrulelist-接口"}},[e._v("#")]),e._v(" CSSRuleList 接口")]),e._v(" "),t("p",[e._v("CSSRuleList 接口是一个类似数组的对象，表示一组 CSS 规则，成员都是 CSSRule 实例。")]),e._v(" "),t("p",[e._v("获取 CSSRuleList 实例，一般是通过StyleSheet.cssRules属性。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("// HTML 代码如下\n// <style id=\"myStyle\">\n//   h1 { color: red; }\n//   p { color: blue; }\n// </style>\nvar myStyleSheet = document.getElementById('myStyle').sheet;\nvar crl = myStyleSheet.cssRules;\ncrl instanceof CSSRuleList // true\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br")])]),t("p",[e._v("CSSRuleList 实例里面，每一条规则（CSSRule 实例）可以通过rules.item(index)或者rules["),t("code",[e._v("index")]),e._v("]拿到。CSS 规则的条数通过rules.length拿到。还是用上面的例子。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("crl[0] instanceof CSSRule // true\ncrl.length // 2\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[e._v("注意，添加规则和删除规则不能在 CSSRuleList 实例操作，而要在它的父元素 StyleSheet 实例上，通过StyleSheet.insertRule()和StyleSheet.deleteRule()操作。")]),e._v(" "),t("h2",{attrs:{id:"cssrule-接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cssrule-接口"}},[e._v("#")]),e._v(" CSSRule 接口")]),e._v(" "),t("h3",{attrs:{id:"_1-概述-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-概述-2"}},[e._v("#")]),e._v(" 1. 概述()")]),e._v(" "),t("p",[e._v("一条 CSS 规则包括两个部分：CSS 选择器和样式声明。下面就是一条典型的 CSS 规则。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(".myClass {\n  color: red;\n  background-color: yellow;\n}\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("p",[e._v("JavaScript 通过 CSSRule 接口操作 CSS 规则。一般通过 CSSRuleList 接口（StyleSheet.cssRules）获取 CSSRule 实例。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("// HTML 代码如下\n// <style id=\"myStyle\">\n//   .myClass {\n//     color: red;\n//     background-color: yellow;\n//   }\n// </style>\nvar myStyleSheet = document.getElementById('myStyle').sheet;\nvar ruleList = myStyleSheet.cssRules;\nvar rule = ruleList[0];\nrule instanceof CSSRule // true\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br")])]),t("h3",{attrs:{id:"_2-cssrule-实例的属性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-cssrule-实例的属性"}},[e._v("#")]),e._v(" 2. CSSRule 实例的属性")]),e._v(" "),t("h4",{attrs:{id:"_1-cssrule-csstext"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-cssrule-csstext"}},[e._v("#")]),e._v(" （1）CSSRule.cssText")]),e._v(" "),t("p",[e._v("CSSRule.cssText属性返回当前规则的文本，还是使用上面的例子。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('rule.cssText\n// ".myClass { color: red; background-color: yellow; }"\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[e._v("如果规则是加载（@import）其他样式表，cssText属性返回@import 'url'。")]),e._v(" "),t("h4",{attrs:{id:"_2-cssrule-parentstylesheet"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-cssrule-parentstylesheet"}},[e._v("#")]),e._v(" （2）CSSRule.parentStyleSheet")]),e._v(" "),t("p",[e._v("CSSRule.parentStyleSheet属性返回当前规则所在的样式表对象（StyleSheet 实例），还是使用上面的例子。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("rule.parentStyleSheet === myStyleSheet // true\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h4",{attrs:{id:"_3-cssrule-parentrule"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-cssrule-parentrule"}},[e._v("#")]),e._v(" （3）CSSRule.parentRule")]),e._v(" "),t("p",[e._v("CSSRule.parentRule属性返回包含当前规则的父规则，如果不存在父规则（即当前规则是顶层规则），则返回null。")]),e._v(" "),t("p",[e._v("父规则最常见的情况是，当前规则包含在@media规则代码块之中。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// HTML 代码如下\n// <style id="myStyle">\n//   @supports (display: flex) {\n//     @media screen and (min-width: 900px) {\n//       article {\n//         display: flex;\n//       }\n//     }\n//  }\n// </style>\nvar myStyleSheet = document.getElementById(\'myStyle\').sheet;\nvar ruleList = myStyleSheet.cssRules;\n\nvar rule0 = ruleList[0];\nrule0.cssText\n// "@supports (display: flex) {\n//    @media screen and (min-width: 900px) {\n//      article { display: flex; }\n//    }\n// }"\n\n// 由于这条规则内嵌其他规则，\n// 所以它有 cssRules 属性，且该属性是 CSSRuleList 实例\nrule0.cssRules instanceof CSSRuleList // true\n\nvar rule1 = rule0.cssRules[0];\nrule1.cssText\n// "@media screen and (min-width: 900px) {\n//   article { display: flex; }\n// }"\n\nvar rule2 = rule1.cssRules[0];\nrule2.cssText\n// "article { display: flex; }"\n\nrule1.parentRule === rule0 // true\nrule2.parentRule === rule1 // true\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br"),t("span",{staticClass:"line-number"},[e._v("13")]),t("br"),t("span",{staticClass:"line-number"},[e._v("14")]),t("br"),t("span",{staticClass:"line-number"},[e._v("15")]),t("br"),t("span",{staticClass:"line-number"},[e._v("16")]),t("br"),t("span",{staticClass:"line-number"},[e._v("17")]),t("br"),t("span",{staticClass:"line-number"},[e._v("18")]),t("br"),t("span",{staticClass:"line-number"},[e._v("19")]),t("br"),t("span",{staticClass:"line-number"},[e._v("20")]),t("br"),t("span",{staticClass:"line-number"},[e._v("21")]),t("br"),t("span",{staticClass:"line-number"},[e._v("22")]),t("br"),t("span",{staticClass:"line-number"},[e._v("23")]),t("br"),t("span",{staticClass:"line-number"},[e._v("24")]),t("br"),t("span",{staticClass:"line-number"},[e._v("25")]),t("br"),t("span",{staticClass:"line-number"},[e._v("26")]),t("br"),t("span",{staticClass:"line-number"},[e._v("27")]),t("br"),t("span",{staticClass:"line-number"},[e._v("28")]),t("br"),t("span",{staticClass:"line-number"},[e._v("29")]),t("br"),t("span",{staticClass:"line-number"},[e._v("30")]),t("br"),t("span",{staticClass:"line-number"},[e._v("31")]),t("br"),t("span",{staticClass:"line-number"},[e._v("32")]),t("br"),t("span",{staticClass:"line-number"},[e._v("33")]),t("br"),t("span",{staticClass:"line-number"},[e._v("34")]),t("br"),t("span",{staticClass:"line-number"},[e._v("35")]),t("br"),t("span",{staticClass:"line-number"},[e._v("36")]),t("br"),t("span",{staticClass:"line-number"},[e._v("37")]),t("br")])]),t("h4",{attrs:{id:"_4-cssrule-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-cssrule-type"}},[e._v("#")]),e._v(" （4）CSSRule.type")]),e._v(" "),t("p",[e._v("CSSRule.type属性返回一个整数值，表示当前规则的类型。")]),e._v(" "),t("p",[e._v("最常见的类型有以下几种。")]),e._v(" "),t("ul",[t("li",[e._v("1：普通样式规则（CSSStyleRule 实例）")]),e._v(" "),t("li",[e._v("3：@import规则")]),e._v(" "),t("li",[e._v("4：@media规则（CSSMediaRule 实例）")]),e._v(" "),t("li",[e._v("5：@font-face规则")])]),e._v(" "),t("h3",{attrs:{id:"_3-cssstylerule-接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-cssstylerule-接口"}},[e._v("#")]),e._v(" 3. CSSStyleRule 接口")]),e._v(" "),t("p",[e._v("如果一条 CSS 规则是普通的样式规则（不含特殊的 CSS 命令），那么除了 CSSRule 接口，它还部署了 CSSStyleRule 接口。")]),e._v(" "),t("p",[e._v("CSSStyleRule 接口有以下两个属性。")]),e._v(" "),t("h4",{attrs:{id:"_1-cssstylerule-selectortext"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-cssstylerule-selectortext"}},[e._v("#")]),e._v(" （1）CSSStyleRule.selectorText")]),e._v(" "),t("p",[e._v("CSSStyleRule.selectorText属性返回当前规则的选择器。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('var stylesheet = document.styleSheets[0];\nstylesheet.cssRules[0].selectorText // ".myClass"\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[e._v("注意，这个属性是可写的。")]),e._v(" "),t("h4",{attrs:{id:"_2-cssstylerule-style"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-cssstylerule-style"}},[e._v("#")]),e._v(" （2）CSSStyleRule.style")]),e._v(" "),t("p",[e._v("CSSStyleRule.style属性返回一个对象（CSSStyleDeclaration 实例），代表当前规则的样式声明，也就是选择器后面的大括号里面的部分。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("// HTML 代码为\n// <style id=\"myStyle\">\n//   p { color: red; }\n// </style>\nvar styleSheet = document.getElementById('myStyle').sheet;\nstyleSheet.cssRules[0].style instanceof CSSStyleDeclaration\n// true\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br")])]),t("p",[e._v("CSSStyleDeclaration 实例的cssText属性，可以返回所有样式声明，格式为字符串。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('styleSheet.cssRules[0].style.cssText\n// "color: red;"\nstyleSheet.cssRules[0].selectorText\n// "p"\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("h3",{attrs:{id:"_4-cssmediarule-接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-cssmediarule-接口"}},[e._v("#")]),e._v(" 4. CSSMediaRule 接口")]),e._v(" "),t("p",[e._v("如果一条 CSS 规则是@media代码块，那么它除了 CSSRule 接口，还部署了 CSSMediaRule 接口。")]),e._v(" "),t("p",[e._v("该接口主要提供media属性和conditionText属性。前者返回代表@media规则的一个对象（MediaList 实例），后者返回@media规则的生效条件。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// HTML 代码如下\n// <style id="myStyle">\n//   @media screen and (min-width: 900px) {\n//     article { display: flex; }\n//   }\n// </style>\nvar styleSheet = document.getElementById(\'myStyle\').sheet;\nstyleSheet.cssRules[0] instanceof CSSMediaRule\n// true\n\nstyleSheet.cssRules[0].media\n//  {\n//    0: "screen and (min-width: 900px)",\n//    appendMedium: function,\n//    deleteMedium: function,\n//    item: function,\n//    length: 1,\n//    mediaText: "screen and (min-width: 900px)"\n// }\n\nstyleSheet.cssRules[0].conditionText\n// "screen and (min-width: 900px)"\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br"),t("span",{staticClass:"line-number"},[e._v("13")]),t("br"),t("span",{staticClass:"line-number"},[e._v("14")]),t("br"),t("span",{staticClass:"line-number"},[e._v("15")]),t("br"),t("span",{staticClass:"line-number"},[e._v("16")]),t("br"),t("span",{staticClass:"line-number"},[e._v("17")]),t("br"),t("span",{staticClass:"line-number"},[e._v("18")]),t("br"),t("span",{staticClass:"line-number"},[e._v("19")]),t("br"),t("span",{staticClass:"line-number"},[e._v("20")]),t("br"),t("span",{staticClass:"line-number"},[e._v("21")]),t("br"),t("span",{staticClass:"line-number"},[e._v("22")]),t("br")])]),t("h2",{attrs:{id:"window-matchmedia"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#window-matchmedia"}},[e._v("#")]),e._v(" window.matchMedia()")]),e._v(" "),t("h3",{attrs:{id:"_1-基本用法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-基本用法"}},[e._v("#")]),e._v(" 1. 基本用法")]),e._v(" "),t("p",[e._v("window.matchMedia方法用来将 CSS 的MediaQuery条件语句，转换成一个 MediaQueryList 实例。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var mdl = window.matchMedia('(min-width: 400px)');\nmdl instanceof MediaQueryList // true\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[e._v("注意，如果参数不是有效的MediaQuery条件语句，window.matchMedia不会报错，依然返回一个 MediaQueryList 实例。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("window.matchMedia('bad string') instanceof MediaQueryList // true\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h3",{attrs:{id:"_2-mediaquerylist-接口的实例属性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-mediaquerylist-接口的实例属性"}},[e._v("#")]),e._v(" 2. MediaQueryList 接口的实例属性")]),e._v(" "),t("p",[e._v("MediaQueryList 实例有三个属性。")]),e._v(" "),t("h4",{attrs:{id:"_1-mediaquerylist-media"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-mediaquerylist-media"}},[e._v("#")]),e._v(" （1）MediaQueryList.media")]),e._v(" "),t("p",[e._v("MediaQueryList.media属性返回一个字符串，表示对应的 MediaQuery 条件语句。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var mql = window.matchMedia('(min-width: 400px)');\nmql.media // \"(min-width: 400px)\"\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("h4",{attrs:{id:"_2-mediaquerylist-matches"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-mediaquerylist-matches"}},[e._v("#")]),e._v(" （2）MediaQueryList.matches")]),e._v(" "),t("p",[e._v("MediaQueryList.matches属性返回一个布尔值，表示当前页面是否符合指定的 MediaQuery 条件语句。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("if (window.matchMedia('(min-width: 400px)').matches) {\n  /* 当前视口不小于 400 像素 */\n} else {\n  /* 当前视口小于 400 像素 */\n}\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br")])]),t("p",[e._v("下面的例子根据mediaQuery是否匹配当前环境，加载相应的 CSS 样式表。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var result = window.matchMedia(\"(max-width: 700px)\");\n\nif (result.matches){\n  var linkElm = document.createElement('link');\n  linkElm.setAttribute('rel', 'stylesheet');\n  linkElm.setAttribute('type', 'text/css');\n  linkElm.setAttribute('href', 'small.css');\n\n  document.head.appendChild(linkElm);\n}\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br")])]),t("h4",{attrs:{id:"_3-mediaquerylist-onchange"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-mediaquerylist-onchange"}},[e._v("#")]),e._v(" （3）MediaQueryList.onchange")]),e._v(" "),t("p",[e._v("如果 MediaQuery 条件语句的适配环境发生变化，会触发change事件。MediaQueryList.onchange属性用来指定change事件的监听函数。该函数的参数是change事件对象（MediaQueryListEvent 实例），该对象与 MediaQueryList 实例类似，也有media和matches属性。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var mql = window.matchMedia('(max-width: 600px)');\n\nmql.onchange = function(e) {\n  if (e.matches) {\n    /* 视口不超过 600 像素 */\n  } else {\n    /* 视口超过 600 像素 */\n  }\n}\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br")])]),t("p",[e._v("上面代码中，change事件发生后，存在两种可能。一种是显示宽度从700像素以上变为以下，另一种是从700像素以下变为以上，所以在监听函数内部要判断一下当前是哪一种情况。")]),e._v(" "),t("h3",{attrs:{id:"_3-mediaquerylist-接口的实例方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-mediaquerylist-接口的实例方法"}},[e._v("#")]),e._v(" 3. MediaQueryList 接口的实例方法")]),e._v(" "),t("p",[e._v("MediaQueryList 实例有两个方法MediaQueryList.addListener()和MediaQueryList.removeListener()，用来为change事件添加或撤销监听函数。")]),e._v(" "),t("div",{staticClass:"language-dom line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var mql = window.matchMedia('(max-width: 600px)');\n\n// 指定监听函数\nmql.addListener(mqCallback);\n\n// 撤销监听函数\nmql.removeListener(mqCallback);\n\nfunction mqCallback(e) {\n  if (e.matches) {\n    /* 视口不超过 600 像素 */\n  } else {\n    /* 视口超过 600 像素 */\n  }\n}\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br"),t("span",{staticClass:"line-number"},[e._v("13")]),t("br"),t("span",{staticClass:"line-number"},[e._v("14")]),t("br"),t("span",{staticClass:"line-number"},[e._v("15")]),t("br")])])])}),[],!1,null,null,null);s.default=n.exports}}]);